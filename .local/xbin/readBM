#!/usr/bin/env sh

# Ensure menu launcher is available
command -v rofi >/dev/null 2>&1 || exit

# Which bookmark to choose
bm=$(ls $HOME/.local/xshare/bookmarks | rofi -dmenu -i -p 'choose the bookmark' -lines 20)
[ "$bm" != "" ] || exit

# Which concept to choose
chosen=$(grep -v "#" $HOME/.local/xshare/bookmarks/$bm | awk '{print $1}'| rofi -dmenu -i -p 'choose the concept' -lines 20)
[ "$chosen" != "" ] || exit

info=$(grep "$chosen" $HOME/.local/xshare/bookmarks/$bm)
pdf=$(echo "$info" | awk '{print $2}')
page=$(echo "$info" | awk '{print $3}')

[ "$pdf" != "" ] || exit
[ "$page" != "" ] || exit

filename=$(find $docDir/Research/Papers -name  "$pdf")

cmd="zathura -P $page $filename"
eval "$cmd"
